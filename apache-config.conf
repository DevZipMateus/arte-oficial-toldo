# Configuração do Apache para React SPA
# Este arquivo deve ser incluído na configuração do Apache ou colocado em sites-available

<VirtualHost *:80>
    ServerName seu-dominio.com
    DocumentRoot /var/www/html/arte-toldo
    
    # Habilitar mod_rewrite
    <Directory /var/www/html/arte-toldo>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Configuração para SPA (Single Page Application)
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.html [L]
    </Directory>
    
    # Configurações de cache para assets estáticos
    <LocationMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2)$">
        ExpiresActive On
        ExpiresDefault "access plus 1 year"
        Header append Cache-Control "public, immutable"
    </LocationMatch>
    
    # Configurações de compressão
    <IfModule mod_deflate.c>
        SetOutputFilter DEFLATE
        SetEnvIfNoCase Request_URI \
            \.(?:gif|jpe?g|png)$ no-gzip dont-vary
        SetEnvIfNoCase Request_URI \
            \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
    </IfModule>
    
    # Log files
    ErrorLog ${APACHE_LOG_DIR}/arte-toldo-error.log
    CustomLog ${APACHE_LOG_DIR}/arte-toldo-access.log combined
</VirtualHost>

# Configuração HTTPS (opcional)
<VirtualHost *:443>
    ServerName seu-dominio.com
    DocumentRoot /var/www/html/arte-toldo
    
    SSLEngine on
    SSLCertificateFile /path/to/your/certificate.crt
    SSLCertificateKeyFile /path/to/your/private.key
    
    <Directory /var/www/html/arte-toldo>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . /index.html [L]
    </Directory>
    
    # Configurações de cache e compressão (mesmas do HTTP)
    <LocationMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2)$">
        ExpiresActive On
        ExpiresDefault "access plus 1 year"
        Header append Cache-Control "public, immutable"
    </LocationMatch>
    
    <IfModule mod_deflate.c>
        SetOutputFilter DEFLATE
        SetEnvIfNoCase Request_URI \
            \.(?:gif|jpe?g|png)$ no-gzip dont-vary
        SetEnvIfNoCase Request_URI \
            \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
    </IfModule>
    
    ErrorLog ${APACHE_LOG_DIR}/arte-toldo-ssl-error.log
    CustomLog ${APACHE_LOG_DIR}/arte-toldo-ssl-access.log combined
</VirtualHost>